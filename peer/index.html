<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peer js example</title>

    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    <script src="https://unpkg.com/peerjs@1.0.0/dist/peerjs.min.js"></script>
    <script src="./peer/custom-peerjs.js"></script>

    <style>
        #step1-error {
            display: none;
        }
    </style>
</head>

<body>
    <h1 class="mb-10 mt-10 text-2xl text-center">Peer js WebRTC app!</h1>
    <div class="mb-10 mx-auto text-center w-full">
        <!-- video area -->
        <div class="flex justify-center">
            <div>
                <h1 class="mb-10 mt-10 text-xl text-center">Your Friend</h1>
                <video id="friend" class="mx-auto" autoplay></video>
            </div>
            <div>
                <h1 class="mb-10 mt-10 text-xl text-center">You</h1>
                <video id="my-video" class="mx-auto" muted="false" autoplay></video>
            </div>
        </div>

        <!-- steps -->
        <div>
            <h2 class="mt-10 text-2xl">Super-simple PerJS Video Chat with menual Signalling</h2>

            <!-- step local audio/video streem -->
            <div class="flex justify-center">
                <div id="step1">
                    <p>Please click 'allow' on the top of the screen so we can access your webcap and microphone for calls.</p>
                    <div id="step1-error" class="bg-red-200 my-4 p-4">
                        <p class="inline-block mb-2 text-base">Failed to access the webcam and microphone. Make sure to run this demo on an http server and click allow when asked for permission by the browser.</p>
                        <a href="javascript:;" id="step1-retry" class="bg-gray-400 font-bold hover:bg-gray-300 leading-10 px-10 py-3 rounded">Try again</a>
                    </div>
                </div>
            </div>

            <!-- Make call to others -->
            <div class="flex justify-around">
                <div id="step2" class="my-4 text-left">
                    <p>Your id: <span id="my-id">...</span></p>
                    <p>Share this id with others so they can call you.</p>
                    <div class="bg-gray-200 my-2 px-6 py-8 rounded">
                        <p id="subhead">Make a call</p>
                        <input type="text" placeholder="Call user id..." id="callto-id" class="leading-10 pl-3 rounded">
                        <button id="make-call" class="bg-blue-500 font-bold hover:bg-blue-400 leading-10 ml-2 px-6 rounded text-white">Call</button>
                    </div>
                </div>
            </div>

            <!-- call in progress -->
            <div class="flex justify-around">
                <div id="step3" class="bg-gray-200 my-2 px-6 py-8 rounded text-left">
                    <p class="block mb-3">Currently in call with <strong id="friend-id">...</strong></p>
                    <button id="end-call" class="bg-orange-500 font-bold hover:bg-orange-400 leading-10 px-6 rounded text-white">End Call</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>